<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notifikasi - Loran Management</title>
    <link rel="stylesheet" href="styles.css">
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <style>
        .notification-item {
            position: relative;
            padding: var(--spacing-md);
            border-bottom: 1px solid #F3F4F6;
            background-color: white;
            transition: background-color 0.2s;
        }

        .notification-item.unread {
            background-color: #F0F9FF;
        }

        .notification-item.unread::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background-color: var(--primary-blue);
        }

        .notification-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            background-color: #f5f5f5;
            color: var(--text-muted);
        }

        .notification-item.unread .notification-icon {
            background-color: var(--accent-light);
            color: var(--primary-blue);
        }
    </style>
</head>

<body>

    <header class="container flex items-center gap-md" style="padding-top: var(--spacing-lg);">
        <a href="index.html" style="color: var(--text-dark); font-size: 1.5rem;">
            <ion-icon name="arrow-back-outline"></ion-icon>
        </a>
        <h1 class="text-xl font-bold">Notifikasi</h1>
        <div style="margin-left: auto;">
            <button id="mark-all-read" class="text-primary text-sm font-medium"
                style="background: none; border: none; cursor: pointer;">Tandai Baca Semua</button>
        </div>
    </header>

    <main class="container main-content animate-fade-in">

        <div class="card" style="padding: 0; overflow: hidden;">
            <div id="notification-list">
                <!-- Notifications will be loaded here -->
            </div>

            <div id="empty-state" style="display: none; padding: 40px 20px; text-align: center;">
                <ion-icon name="notifications-off-outline"
                    style="font-size: 48px; color: var(--text-muted); margin-bottom: 16px; opacity: 0.5;"></ion-icon>
                <p class="text-muted">Tidak ada notifikasi baru</p>
            </div>
        </div>

    </main>

    <nav class="bottom-nav">
        <a href="index.html" class="nav-item">
            <ion-icon name="home-outline" class="nav-icon"></ion-icon>
            <span>Beranda</span>
        </a>
        <a href="payment.html" class="nav-item">
            <ion-icon name="card-outline" class="nav-icon"></ion-icon>
            <span>Bayar</span>
        </a>
        <a href="admin.html" class="nav-item">
            <ion-icon name="grid-outline" class="nav-icon"></ion-icon>
            <span>Admin</span>
        </a>
        <a href="profile.html" class="nav-item">
            <ion-icon name="person-outline" class="nav-icon"></ion-icon>
            <span>Profil</span>
        </a>
    </nav>

    <script>
        const notificationData = [
            {
                id: 1,
                title: "Tagihan Iuran Sampah",
                message: "Tagihan bulan Oktober 2025 sebesar Rp 20.000 telah terbit.",
                time: "Baru saja",
                icon: "trash-outline",
                type: "payment",
                read: false
            },
            {
                id: 2,
                title: "Pembayaran Berhasil",
                message: "Pembayaran iuran keamanan September 2025 telah diverifikasi oleh admin.",
                time: "2 hari yang lalu",
                icon: "checkmark-circle-outline",
                type: "success",
                read: true
            },
            {
                id: 3,
                title: "Pengumuman Kerja Bakti",
                message: "Kerja bakti akan diadakan pada hari Minggu, 26 Oktober 2025.",
                time: "3 hari yang lalu",
                icon: "people-outline",
                type: "info",
                read: true
            }
        ];

        const listContainer = document.getElementById('notification-list');
        const emptyState = document.getElementById('empty-state');
        const markAllReadBtn = document.getElementById('mark-all-read');

        function renderNotifications() {
            listContainer.innerHTML = '';

            if (notificationData.length === 0) {
                emptyState.style.display = 'block';
                return;
            }

            notificationData.forEach(notif => {
                const item = document.createElement('div');
                item.className = `notification-item flex items-start gap-md ${notif.read ? '' : 'unread'}`;
                item.onclick = () => markAsRead(notif.id);

                let iconColor = '';
                if (notif.type === 'success') iconColor = 'color: var(--secondary-green);';
                if (notif.type === 'payment') iconColor = 'color: var(--primary-blue);';

                item.innerHTML = `
                    <div class="notification-icon">
                        <ion-icon name="${notif.icon}" style="${iconColor}"></ion-icon>
                    </div>
                    <div style="flex: 1;">
                        <h4 class="font-bold text-sm" style="margin-bottom: 4px;">${notif.title}</h4>
                        <p class="text-muted text-sm" style="font-size: 0.85rem; line-height: 1.4;">${notif.message}</p>
                        <span class="text-xs text-muted" style="margin-top: 6px; display: block; opacity: 0.8;">${notif.time}</span>
                    </div>
                `;

                listContainer.appendChild(item);
            });
        }

        function markAsRead(id) {
            const notif = notificationData.find(n => n.id === id);
            if (notif && !notif.read) {
                notif.read = true;
                renderNotifications();
            }
        }

        markAllReadBtn.addEventListener('click', () => {
            notificationData.forEach(n => n.read = true);
            renderNotifications();
        });

        // Initial render
        renderNotifications();
    </script>
</body>

</html>